## 图书管理系统

**系统描述 **

有一个图书管理系统，管理员每天登记图书信息（编号、书名、数量等)，并根据用户的需求査阅库存信息，若有用户需要的图书且数量足够，则取书给用户；否则让用户填写订购单，幷录人该信息，管理员每周打印图书报表上交。 

**考试要求：**

**1、设计该系统的顶层数据流图和一层数据流图；定义图书信息卡的数据字典；识别系统中的类和对象。**

**2、表达该系统的详细设计：画出程序流程图描述本系统。**

```shell
# 1.1 设计数据流图 (DFD)
# A. 顶层数据流图（Context Diagram）
顶层图描述了整个系统（一个处理过程）与外部实体之间的交互。
DFD 元素,名称,描述
系统,图书管理系统,核心处理过程
外部实体 1,管理员,负责录入信息、查询和报表打印
外部实体 2,用户,提出借阅需求，接收图书或填写订购单
数据流 (输入),图书登记信息,管理员输入新书或库存更新信息
数据流 (输入),借书需求,用户提交的书名/编号
数据流 (输出),库存信息,管理员的查询结果
数据流 (输出),打印报表,管理员每周上交的报表
数据流 (输出),借出图书,系统确认借阅后给予用户
数据流 (输出),订购单,库存不足时用户填写的单据
数据流 (输入),订购信息,用户提交的订购单信息
# B. 一层数据流图（Level 1 DFD）
一层图将系统分解为主要的业务处理模块和数据存储。
DFD 元素,名称,描述
处理 P1,图书信息登记,每日处理管理员的入库信息，更新库存。
处理 P2,库存查询与借阅,处理用户的借书需求，检查库存并决定是否借出。
处理 P3,订购信息处理,记录库存不足时用户提交的订购单。
处理 P4,报表生成与打印,每周汇总图书和订购信息，生成管理报表。
数据存储 D1,图书信息库,存储所有图书的详细信息和数量。
数据存储 D2,订购信息库,存储所有用户提交的订购单信息。
# 1.2 定义图书信息卡的数据字典
数据项名称,数据结构/别名,数据类型,长度/范围,描述
图书信息卡,= 图书编号 + 书名 + 作者 + 出版社 + 馆藏总量 + 剩余数量,复合项,记录每本图书的详细信息
图书编号,,字符型,10,唯一标识图书（主键）
书名,,字符型,50,图书的完整名称
馆藏总量,,整型,>0,本馆拥有的该图书总数
剩余数量,,整型,≥0,当前可供借阅的图书数量（库存）
作者,,字符型,30,图书的作者
# 1.3 识别系统中的类和对象 (面向对象分析)
类名称,职责与主要属性,关键方法（操作）
Book (图书),"存储图书的详细信息和库存状态。(→ 编号, 书名, 剩余数量)","查询库存(), 借出图书(), 入库登记()"
Librarian (管理员),系统的操作者，执行登记、查询、报表等操作。,"录入信息(), 生成报表(), 处理订购()"
User (用户),提出借阅需求。,"提出借阅需求(), 填写订购单()"
Order (订购单),"记录库存不足时的待采购信息。(→ 编号, 书名, 数量, 用户ID)",记录订购信息()
SystemManager,系统的业务逻辑管理者。,"处理借阅(), 检查库存()"
```

```shell
# 2：详细设计（程序流程图）
选择系统的核心业务流程——库存查询与借阅处理，绘制程序流程图。
流程图符号,步骤描述
椭圆 (开始),开始（接收到用户的借书需求）
平行四边形 (输入),输入：用户提供的书名或编号
矩形 (处理),P2.1：从图书信息库 (D1)查询该书的剩余数量
菱形 (判断),剩余数量 ≥1？
矩形 (处理/是),借出成功：更新D1：剩余数量 −1；输出 借出图书。
矩形 (处理/否),库存不足：系统提示用户填写 订购单。
平行四边形 (输入),输入：用户填写的 订购信息。
矩形 (处理/否),P3.1：将 订购信息 记录到订购信息库 (D2)。
矩形 (处理/否),输出：提示用户已记录订购，等待采购。
椭圆 (结束),结束
```

## 仓管系统

**系统描述： **

有仓库管理系统，管理员负责登记入库物品（品名，数量，单价，日期）。同时 根据用户要求（品名，数量），查看有无所需物品，若有查看库存量是否满足，如满足方可提货，并修改库存。同时，每月打印报表交给库房主任。

**考试要求： 1、设计该系统的顶层数据流图和一层数据流图；同时定义入库物品信息卡的数据字典；识别系统中的类和对象。**

**2、表达该系统的详细设计：画出程序流程图描述本系统。**

```shell
# 1.1 设计数据流图 (DFD)
# A. 顶层数据流图（Context Diagram）
顶层图描述了整个系统与外部实体之间的交互。
DFD 元素,名称,描述
系统,仓库管理系统,核心处理过程
外部实体 1,管理员,负责登记入库、处理提货、打印报表。
外部实体 2,用户,提出提货需求。
外部实体 3,库房主任,接收每月报表。
数据流 (输入),入库物品信息,"管理员登记的物品数据（品名, 数量, 单价, 日期）。"
数据流 (输入),提货需求,"用户提交的所需物品信息（品名, 数量）。"
数据流 (输出),提货许可,满足库存要求时发给用户。
数据流 (输出),报表,每月提交给库房主任的汇总信息。
# B.一层数据流图（Level 1 DFD）
一层图将系统分解为主要的业务处理模块和数据存储。
DFD 元素,名称,描述
处理 P1,入库登记,每日处理管理员的入库信息，更新库存。
处理 P2,库存查询与提货处理,处理用户提货需求，检查库存，若满足则修改库存并发放提货许可。
处理 P3,报表生成,每月汇总库存变动和现有库存，生成管理报表。
数据存储 D1,物品库存信息库,存储所有物品的详细信息、数量和单价。
数据存储 D2,出入库记录,存储每一次入库和提货的操作记录（日志）。
# 1.2 定义入库物品信息卡的数据字典
这里定义物品库存信息库 (D1) 中的核心数据结构。
数据项名称,数据结构/别名,数据类型,长度/范围,描述
入库物品信息卡,= 物品编号 + 品名 + 现有数量 + 单价 + 最后入库日期,复合项,,记录仓库中每种物品的最新信息
物品编号,,字符型,10,唯一标识物品（主键）
品名,,字符型,50,物品的名称
现有数量,,整型,≥0,仓库中该物品的当前库存量
单价,,浮点型,,该物品的入库或平均单价
最后入库日期,,日期型,,该物品最后一次入库的日期
# 1.3 识别系统中的类和对象 (面向对象分析)
类名称,职责与主要属性,关键方法（操作）
InventoryItem (库存物品),"存储物品的静态信息和动态库存数据。(→ 编号, 品名, 数量, 单价)","增加库存(), 减少库存(), 查询库存()"
Admin (管理员),执行系统的操作，如登记、处理提货、打印报表。,"录入入库(), 生成报表(), 处理提货()"
User (用户),系统的使用者，发出提货请求。,提出提货需求()
TransactionRecord (交易记录),"记录每一次的出入库操作日志。(→ 记录ID, 品名, 数量, 类型(入/出), 日期)",记录操作()
WarehouseSystem,封装所有业务逻辑和数据访问方法。,"处理入库(), 执行提货(), 打印月报()"
```

```shell
# 详细设计（程序流程图）
选择系统的核心业务流程——用户提货处理，绘制程序流程图。
程序流程图：库存查询与提货处理
流程图符号,步骤描述
椭圆 (开始),开始（接收到用户的提货需求）
平行四边形 (输入),输入：用户提供的品名和数量
矩形 (处理),P2.1：从物品库存信息库 (D1)查询该物品的现有数量
菱形 (判断),现有数量 ≥ 需求数量？
矩形 (处理/是),提货成功：更新D1：现有数量 -= 需求数量。
矩形 (处理/是),记录本次提货操作到出入库记录 (D2)。
输出,输出：发放提货许可。
矩形 (处理/否),库存不足：计算缺货数量。
输出,输出：提示用户库存不足（告知缺货量）。
椭圆 (结束),结束
```