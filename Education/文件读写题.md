## C++

#### 复制文件

```c++
#include <iostream>
#include <fstream>
#include <string>
#include <sstream> // 用于更好的错误处理
// 定义文件名常量
const std::string FILE1_NAME = "file1.txt"; // 源文件
const std::string FILE2_NAME = "file2.txt"; // 目标文件
/**
 * @brief 将文件1的内容复制到文件2，并输出文件2的内容。
 * @return 成功返回 0，失败返回 -1。
 */
int copy_and_display() {
    std::string line;
    // ---------------------------------------------------
    // 1. 打开源文件 (file1.txt) 进行读取
    // ---------------------------------------------------
    std::ifstream inputFile(FILE1_NAME);
    if (!inputFile.is_open()) {
        std::cerr << "错误：无法打开源文件 (" << FILE1_NAME << ")。请确保文件存在。" << std::endl;
        return -1;
    }
    // ---------------------------------------------------
    // 2. 打开目标文件 (file2.txt) 进行写入
    //    std::ofstream 默认会覆盖文件内容
    // ---------------------------------------------------
    std::ofstream outputFile(FILE2_NAME);
    if (!outputFile.is_open()) {
        std::cerr << "错误：无法打开目标文件 (" << FILE2_NAME << ") 进行写入。" << std::endl;
        inputFile.close();
        return -1;
    }
    // ---------------------------------------------------
    // 3. 逐行复制文件内容
    // ---------------------------------------------------
    std::cout << "--- 正在复制内容从 " << FILE1_NAME << " 到 " << FILE2_NAME << " ---" << std::endl;
    while (std::getline(inputFile, line)) {
        outputFile << line << "\n"; // 写入内容，并重新添加换行符
    }
    // 检查是否有错误发生（如磁盘空间不足等）
    if (inputFile.bad() || outputFile.bad()) {
        std::cerr << "错误：文件读写过程中发生致命错误。" << std::endl;
    }
    // 关闭文件流，确保数据写入磁盘
    inputFile.close();
    outputFile.close();
    // ---------------------------------------------------
    // 4. 读取并输出文件 2 (file2.txt) 的内容
    // ---------------------------------------------------
    std::cout << "\n--- 文件 2 (" << FILE2_NAME << ") 的内容 ---" << std::endl;
    // 重新打开文件 2 进行读取
    std::ifstream file2_read(FILE2_NAME);
    if (!file2_read.is_open()) {
        std::cerr << "错误：无法重新打开文件 2 进行读取。" << std::endl;
        return -1;
    }
    // 逐行读取并输出到控制台
    while (std::getline(file2_read, line)) {
        std::cout << line << std::endl;
    }
    file2_read.close();
    return 0;
}
int main() {
    // 示例：创建 file1.txt (假设它不存在)
    // 实际操作中，您可能需要在运行前手动创建文件
    std::ofstream temp_writer(FILE1_NAME);
    temp_writer << "这是文件 1 的第一行。\n";
    temp_writer << "This is the second line.\n";
    temp_writer.close();
    // 执行复制和输出操作
    if (copy_and_display() == 0) {
        std::cout << "\n操作成功完成。" << std::endl;
    } else {
        std::cout << "\n操作失败。" << std::endl;
    }
    return 0;
}
```

## Java

#### 复制文件

```java
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.File;
public class FileCopy {
    private static final String FILE1_NAME = "file1.txt"; // 源文件
    private static final String FILE2_NAME = "file2.txt"; // 目标文件
    public static void main(String[] args) {
        // 1. 创建演示文件 (如果不存在)
        createExampleFile();
        // 2. 执行复制操作
        if (copyFile()) {
            System.out.println("\n文件内容复制成功！");
            // 3. 输出文件2的内容
            System.out.println("--- 文件 2 (" + FILE2_NAME + ") 的内容 ---");
            displayFileContent();
        } else {
            System.out.println("\n操作失败，请检查文件权限或路径。");
        }
    }
    /**
     * @brief 将 FILE1_NAME 的内容复制到 FILE2_NAME。
     * @return 复制成功返回 true，否则返回 false。
     */
    private static boolean copyFile() {
        // 使用 try-with-resources 确保文件流自动关闭
        try (BufferedReader reader = new BufferedReader(new FileReader(FILE1_NAME));
             BufferedWriter writer = new BufferedWriter(new FileWriter(FILE2_NAME))) {
            String line;
            System.out.println("--- 正在复制内容 ---");
            // 逐行读取源文件，并写入目标文件
            while ((line = reader.readLine()) != null) {
                writer.write(line);
                writer.newLine(); // 写入换行符
            }
            return true;
        } catch (IOException e) {
            System.err.println("复制文件时发生 I/O 错误: " + e.getMessage());
            return false;
        }
    }
    /**
     * @brief 读取并输出 FILE2_NAME 的内容。
     */
    private static void displayFileContent() {
        try (BufferedReader reader = new BufferedReader(new FileReader(FILE2_NAME))) {
            String line;
            // 逐行读取并输出到控制台
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
        } catch (IOException e) {
            System.err.println("读取文件时发生 I/O 错误: " + e.getMessage());
        }
    }
    /**
     * @brief 辅助函数：创建 file1.txt 示例内容。
     */
    private static void createExampleFile() {
        File file1 = new File(FILE1_NAME);
        if (!file1.exists()) {
            try (BufferedWriter writer = new BufferedWriter(new FileWriter(file1))) {
                writer.write("Java 文件操作示例行 1.");
                writer.newLine();
                writer.write("This is line 2 from file1.");
                writer.newLine();
                System.out.println("已自动创建并填充 " + FILE1_NAME);
            } catch (IOException e) {
                System.err.println("创建示例文件失败: " + e.getMessage());
            }
        }
    }
}
```

